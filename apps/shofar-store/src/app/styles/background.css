/**
 * TOOLY Design System - Background Effects
 * Work Order 2.5.REBOOT
 *
 * Alive backgrounds with noise, gradients, and spotlight effects
 */

/* ===========================
   NOISE OVERLAY
   Subtle texture for depth
   =========================== */

.bg-noise {
  position: relative;
}

.bg-noise::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: var(--noise-opacity, 0.03);
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  z-index: 1;
  mix-blend-mode: overlay;
}

/* ===========================
   SPOTLIGHT EFFECT
   Pointer-following soft light
   =========================== */

.spotlight {
  --sx: 0px;
  --sy: 0px;
  --sr: 120px;
  position: relative;
  isolation: isolate;
}

.spotlight::before {
  content: "";
  position: absolute;
  inset: -200vh;
  z-index: 0;
  pointer-events: none;
  background: radial-gradient(
    circle var(--sr) at center,
    rgba(255, 255, 255, 0.35) 0%,
    rgba(255, 255, 255, 0) 100%
  );
  mix-blend-mode: soft-light;
  transform: translate(var(--sx), var(--sy));
  transition: transform var(--t-base, 200ms) var(--ease-out, ease-out);
  opacity: 0.15;
}

.spotlight > * {
  position: relative;
  z-index: 1;
}

/* Stronger spotlight variant */
.spotlight--strong::before {
  opacity: 0.25;
  --sr: 200px;
}

/* Subtle spotlight variant */
.spotlight--subtle::before {
  opacity: 0.08;
  --sr: 80px;
}

/* ===========================
   ALIVE BACKGROUND
   Animated gradient with movement
   =========================== */

.bg-alive {
  position: relative;
  background: var(--surface-bg);
  overflow: hidden;
}

.bg-alive::before {
  content: "";
  position: absolute;
  inset: -100%;
  background: conic-gradient(
    from 0deg at 50% 50%,
    transparent 0deg,
    rgba(255, 98, 49, 0.1) 60deg,
    transparent 120deg,
    rgba(20, 199, 255, 0.1) 180deg,
    transparent 240deg,
    rgba(16, 97, 255, 0.1) 300deg,
    transparent 360deg
  );
  animation: rotate-gradient 30s linear infinite;
  opacity: 0.5;
  pointer-events: none;
}

@keyframes rotate-gradient {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .bg-alive::before {
    animation: none;
  }
}

/* ===========================
   GRADIENT OVERLAYS
   For hero sections and cards
   =========================== */

.gradient-overlay {
  position: relative;
}

.gradient-overlay::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    180deg,
    rgba(11, 15, 20, 0) 0%,
    rgba(11, 15, 20, 0.5) 50%,
    rgba(11, 15, 20, 0.95) 100%
  );
  pointer-events: none;
  z-index: 1;
}

.gradient-overlay > * {
  position: relative;
  z-index: 2;
}

/* Edge fade for marquees */
.gradient-fade-x {
  position: relative;
}

.gradient-fade-x::before,
.gradient-fade-x::after {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  width: 60px;
  z-index: 10;
  pointer-events: none;
}

.gradient-fade-x::before {
  left: 0;
  background: linear-gradient(
    90deg,
    var(--color-gm-950) 0%,
    transparent 100%
  );
}

.gradient-fade-x::after {
  right: 0;
  background: linear-gradient(
    -90deg,
    var(--color-gm-950) 0%,
    transparent 100%
  );
}

/* ===========================
   WATERMARK BACKDROP
   Large background branding
   =========================== */

.watermark-backdrop {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;
}

.watermark-backdrop::before {
  content: "TOOLY";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-15deg);
  font-size: clamp(10rem, 30vw, 20rem);
  font-weight: 900;
  font-family: var(--font-sans);
  color: var(--color-gm-900);
  opacity: 0.03;
  letter-spacing: -0.05em;
  text-transform: uppercase;
  white-space: nowrap;
}

/* Watermark with spotlight tracking */
.watermark-backdrop.spotlight::after {
  content: "";
  position: absolute;
  width: 400px;
  height: 400px;
  border-radius: 50%;
  background: radial-gradient(
    circle,
    rgba(255, 255, 255, 0.15) 0%,
    transparent 70%
  );
  left: var(--pointer-x);
  top: var(--pointer-y);
  transform: translate(-50%, -50%);
  mix-blend-mode: soft-light;
  transition: left 0.3s ease-out, top 0.3s ease-out;
  pointer-events: none;
}

/* ===========================
   MESH GRADIENT
   Smooth color transitions
   =========================== */

.mesh-gradient {
  background:
    radial-gradient(at 40% 20%, var(--color-gm-700) 0px, transparent 50%),
    radial-gradient(at 80% 0%, var(--color-gm-800) 0px, transparent 50%),
    radial-gradient(at 10% 50%, var(--color-gm-900) 0px, transparent 50%),
    radial-gradient(at 80% 50%, var(--color-brand) 0px, transparent 50%),
    radial-gradient(at 30% 70%, var(--color-brand-2) 0px, transparent 50%),
    var(--color-gm-950);
  background-size: 200% 200%;
  animation: mesh-shift 20s ease infinite;
}

@keyframes mesh-shift {
  0%, 100% {
    background-position: 0% 0%;
  }
  50% {
    background-position: 100% 100%;
  }
}

/* ===========================
   UTILITY CLASSES
   =========================== */

/* Contain background effects */
.bg-contain {
  position: relative;
  overflow: hidden;
}

/* Z-index management */
.bg-behind {
  z-index: -1;
}

.bg-front {
  z-index: 1;
}

/* Dark overlay */
.dark-overlay {
  position: relative;
}

.dark-overlay::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(11, 15, 20, 0.7);
  pointer-events: none;
}

/* Performance hints */
.will-change-bg {
  will-change: background-position;
}

.gpu-bg {
  transform: translateZ(0);
  backface-visibility: hidden;
}